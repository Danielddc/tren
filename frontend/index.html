<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÇ Simulador de Tren - Tiempo Real</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="background"></div>
    
    <!-- Panel de Control Principal -->
    <div class="main-container">
        <!-- Panel Superior: Configuraci√≥n de Estaciones -->
        <div class="top-panel">
            <div class="glass-card config-card">
                <h2><i class="fas fa-map-marker-alt"></i> Configuraci√≥n de Estaciones</h2>
                
                <form id="simulationForm">
                    <div class="station-config-grid">
                        <div class="form-group">
                            <label for="numStations">
                                <i class="fas fa-hashtag"></i> N√∫mero de Estaciones
                            </label>
                            <input type="number" id="numStations" value="5" min="1" max="20" step="1">
                        </div>
                    </div>
                    
                    <!-- Nombres de Estaciones -->
                    <div class="station-names-section">
                        <label>
                            <i class="fas fa-edit"></i> Nombres de Estaciones
                        </label>
                        <div id="stationNamesContainer" class="station-names-grid">
                            <!-- Se generar√° din√°micamente -->
                        </div>
                        <button type="button" id="generateNamesBtn" class="btn-secondary small">
                            <i class="fas fa-magic"></i> Generar Nombres Autom√°ticos
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Panel de Arduino -->
            <div class="glass-card arduino-card">
                <h2><i class="fas fa-microchip"></i> Arduino</h2>
                
                <div class="arduino-controls-compact">
                    <div class="arduino-status">
                        <span id="arduinoStatus" class="status-disconnected">‚óè Desconectado</span>
                    </div>
                    
                    <div class="arduino-port-select">
                        <select id="arduinoPort">
                            <option value="">Auto-detectar</option>
                            <option value="COM1">COM1</option>
                            <option value="COM2">COM2</option>
                            <option value="COM3" selected>COM3</option>
                            <option value="COM4">COM4</option>
                            <option value="COM5">COM5</option>
                            <option value="COM6">COM6</option>
                            <option value="COM7">COM7</option>
                            <option value="COM8">COM8</option>
                        </select>
                        <select id="baudRate">
                            <option value="9600">9600</option>
                            <option value="19200">19200</option>
                            <option value="57600">57600</option>
                            <option value="115200">115200</option>
                        </select>
                    </div>
                    
                    <div class="button-group-compact">
                        <button id="connectArduinoBtn" class="btn-primary small">
                            <i class="fas fa-plug"></i> Conectar
                        </button>
                        <button id="disconnectArduinoBtn" class="btn-danger small" disabled>
                            <i class="fas fa-times"></i> Desconectar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Panel Central: Datos de Llegada -->
        <div class="center-panel">
            <div class="glass-card data-card">
                <h3><i class="fas fa-train"></i> Datos de Llegada del Tren</h3>
                <div id="arrivalDataDisplay" class="arrival-data-container">
                    <p class="no-data">Esperando datos del Arduino...</p>
                </div>
            </div>
        </div>
        
        <!-- Panel Derecho: Estado Actual y Datos Arduino -->
        <div class="right-panel">
            <!-- Estado Actual -->
            <div class="glass-card status-card">
                <h3><i class="fas fa-info-circle"></i> Estado Actual</h3>
                <div class="status-grid">
                    <div class="status-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <span class="status-label">Tiempo</span>
                            <span class="status-value" id="currentTime">0.0s</span>
                        </div>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-location-arrow"></i>
                        <div>
                            <span class="status-label">Posici√≥n</span>
                            <span class="status-value" id="currentPosition">0.0m</span>
                        </div>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <div>
                            <span class="status-label">Velocidad</span>
                            <span class="status-value" id="currentVelocity">0.0 m/s</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Datos del Arduino en Tiempo Real -->
            <div class="glass-card arduino-data-card">
                <h3><i class="fas fa-microchip"></i> Datos Arduino</h3>
                <div class="data-grid-compact">
                    <div class="data-item">
                        <i class="fas fa-clock"></i>
                        <span>Tiempo: <strong id="arduinoTime">--</strong></span>
                    </div>
                    <div class="data-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Velocidad: <strong id="arduinoVelocity">--</strong></span>
                    </div>
                    <div class="data-item">
                        <i class="fas fa-rocket"></i>
                        <span>Aceleraci√≥n: <strong id="arduinoAcceleration">--</strong></span>
                    </div>
                    <div class="data-item">
                        <i class="fas fa-ruler"></i>
                        <span>Distancia: <strong id="arduinoDistance">--</strong></span>
                    </div>
                </div>
            </div>
            
            <!-- Historial de Estaciones -->
            <div class="glass-card stations-card">
                <h3><i class="fas fa-list"></i> Historial de Estaciones</h3>
                <div id="stationsLog" class="stations-log">
                    <p class="no-data">Esperando llegadas...</p>
                </div>
            </div>
        </div>
        
        <!-- Panel Inferior: Oculto -->
        <div class="bottom-panel" style="display: none;">
        </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        <p>üöÇ Sistema de Monitoreo de Tren - Datos en Tiempo Real desde Arduino</p>
    </div>

    <!-- Scripts -->
    <script src="js/websocket.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Inputs ocultos para mantener compatibilidad -->
    <input type="hidden" id="initialVelocity" value="0">
    <input type="hidden" id="stationDistance" value="3.20">
    <input type="hidden" id="acceleration" value="1">
    <input type="hidden" id="timeStep" value="0.05">
    <input type="hidden" id="accelerationSlider" value="1">
    <span id="accelValue" style="display:none;">1.0</span>
    <button id="startBtn" style="display:none;"></button>
    <button id="pauseBtn" style="display:none;"></button>
    <button id="stopBtn" style="display:none;"></button>
    <button id="refreshTimesBtn" style="display:none;"></button>
    <button id="refreshPortsBtn" style="display:none;"></button>
    <span id="connectionStatus" style="display:none;"></span>

</body>
</html>